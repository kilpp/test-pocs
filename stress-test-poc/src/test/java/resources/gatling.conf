#########################
# Gatling Configuration #
#########################

# This file contains all the settings configuring gatling-core
# (formerly known as gatling.conf)
# Documentation: https://gatling.io/docs/gatling/reference/current/core/configuration/

gatling {
  core {
    # The directory where results will be stored
    outputDirectoryBaseName = "dungeonGameTests"
    
    # The directory where request bodies are stored
    directory {
      simulations = user-files/simulations
      resources = user-files/resources
      reportsOnly = results
      binaries = ""
      results = results
    }
    
    # Encoding to use throughout Gatling for file and string manipulation
    encoding = "utf-8"
    
    # Simulation timeout
    timeOut {
      simulation = 8640000 # 24 hours in seconds
    }
    
    extract {
      regex {
        cacheMaxCapacity = 200 # Cache size for the compiled regexes, set to 0 to disable caching
      }
      xpath {
        cacheMaxCapacity = 200 # Cache size for the compiled XPath queries, set to 0 to disable caching
      }
      jsonPath {
        cacheMaxCapacity = 200 # Cache size for the compiled jsonPath queries, set to 0 to disable caching
      }
      css {
        cacheMaxCapacity = 200 # Cache size for the compiled CSS selectors queries, set to 0 to disable caching
      }
    }
  }
  
  socket {
    # Timeout for establishing a TCP socket
    connectTimeout = 10000
    # Timeout for a TCP socket when no activity has happened
    tcpNoDelay = true
    # SO_KEEPALIVE, false by default
    soKeepAlive = false
    # SO_REUSEADDR, false by default  
    soReuseAddress = false
  }
  
  netty {
    # When set to true, prefer native Epoll/KQueue over NIO (when available)
    useNativeTransport = true
    # Number of threads used for performing non-blocking I/O work
    useIoUring = true
    allocator = "pooled" # pooled or unpooled
    maxThreadLocalCharBufferSize = 200000
  }
  
  ssl {
    keyStore {
      type = ""      # Type of SSLContext's KeyManagers store
      file = ""      # Location of SSLContext's KeyManagers store
      password = ""  # Password for SSLContext's KeyManagers store
      algorithm = "" # Algorithm used SSLContext's KeyManagers store
    }
    trustStore {
      type = ""      # Type of SSLContext's TrustManagers store
      file = ""      # Location of SSLContext's TrustManagers store  
      password = ""  # Password for SSLContext's TrustManagers store
      algorithm = "" # Algorithm used by SSLContext's TrustManagers store
    }
    enabledProtocols = [] # Array of enabled SSL/TLS protocols
    enabledCipherSuites = [] # Array of enabled SSL/TLS cipher suites
    sessionCacheSize = 0 # SSLSession cache size, set to 0 to use JVM's default
    sessionTimeout = 0 # SSLSession timeout in seconds, set to 0 to use JVM's default (24h)
    useOpenSsl = true # if OpenSSL should be used instead of JSSE (only the latter can be debugged with -Djava.net.debug=ssl)
    useOpenSslFinalizers = true # if OpenSSL contexts should be freed with Finalizer or if using RefCounted is fine
    handshakeTimeout = 10000 # TLS handshake timeout in millis
    useInsecureTrustManager = false # Use an insecure TrustManager that trusts all server certificates
  }
  
  charting {
    # Indicators lower bound
    indicators {
      lowerBound = 800      # in ms
      higherBound = 1200    # in ms
      percentile1 = 50      # in percents
      percentile2 = 75      # in percents  
      percentile3 = 95      # in percents
      percentile4 = 99      # in percents
    }
  }
  
  http {
    # The timeout applied to fetching resources when inferHtmlResources is enabled
    fetchedCssCacheMaxCapacity = 200 # Cache size for CSS parsed content, set to 0 to disable
    fetchedHtmlCacheMaxCapacity = 200 # Cache size for HTML parsed content, set to 0 to disable
    perUserCacheMaxCapacity = 200 # Per virtual user cache size, set to 0 to disable
    warmUpUrl = "https://gatling.io" # The URL to use to warm-up the HTTP stack (blank means disabled)
    enableGA = true # Very light Google Analytics (Gatling and Java version), please support
    
    ssl {
      useOpenSsl = true # if OpenSSL should be used instead of JSSE
      useOpenSslFinalizers = true # if OpenSSL contexts should be freed with Finalizer or if using RefCounted is fine
      handshakeTimeout = 10000 # TLS handshake timeout in millis
      useInsecureTrustManager = false # Use an insecure TrustManager that trusts all server certificates
    }
    
    ahc {
      # Timeout for establishing a connection
      connectTimeout = 10000
      # Timeout for a request
      requestTimeout = 60000
      # Timeout for reading HTTP response
      readTimeout = 60000
      # Period for shutting down the thread pool
      shutdownQuietPeriod = 2000 # in ms
      # Period for shutting down the thread pool  
      shutdownTimeout = 15000 # in ms
      # Thread pool size for I/O operations
      ioThreadsCount = -1 # use Netty default
      # Maximum number of connections per host
      maxConnectionsPerHost = -1 # use Netty default
      # Maximum number of connections in pool
      maxConnections = -1 # use Netty default
      # Maximum number of redirects
      maxRedirects = 5
      # Pool connections
      pooledConnectionIdleTimeout = 60000 # in ms, use 0 to disable
      # Connection TTL
      connectionTtl = -1 # in ms, use -1 to disable
      # Use raw URL
      useRawUrl = false
    }
  }
  
  jms {
    # Timeout for JMS API
    replyTimeoutScanPeriod = 1000 # scan period for timedout reply messages
  }
  
  data {
    # Readers for CSV files
    csv {
      circularIterator = true # enable/disable circular iteration over CSV files
    }
    # Console output coloring
    console {
      light = false # When set to true, use light color scheme, false for dark
      writePeriod = 5 # Write interval, in seconds
    }
    # Graphite metrics export, set to "" to disable
    graphite {
      light = false # only send the all* stats
      host = ""
      port = 2003
      protocol = "tcp" # Choose between 'tcp' or 'udp'
      rootPathPrefix = "gatling"
      bufferSize = 8192
      writePeriod = 1
    }
  }
}

